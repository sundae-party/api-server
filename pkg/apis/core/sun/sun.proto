syntax = "proto3";

package types;

import "integration.proto";

option go_package = "github.com/sundae-party/api-server/pkg/apis/core/types";

service SunHandler {
    rpc Get (Sun) returns (Sun);
    rpc Create (Sun) returns (Sun);
    rpc Update (Sun) returns (Sun);
    rpc Delete (Sun) returns (Sun);

    rpc Watch (Sun) returns (stream Sun);
    rpc setValue (SetSunValueRequest) returns (Sun);
}

message SetSunValueRequest {
    string SunName = 1;
    string integrationName = 2;
    SunState value = 3;
}

message SunState {
	int64 nextRising = 1;
	int64 nextSetting = 2;
    int64 nextNoon = 5;
    int64 nextMidnight = 6;
    int64 elevation = 7;
    int64 azimuth = 8;
	enum State {
        above_horizon = 0;
        below_horizon = 1;
    };
    State state = 10;
}

message Sun {
    string name = 1;
    types.Integration integration = 2;
    string displayed_name = 4;
    SunState state = 6;
    string mutation = 9;
}