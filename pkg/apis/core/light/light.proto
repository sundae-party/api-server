syntax = "proto3";

package types;

import "integration.proto";

option go_package = "sundae-party/api-server/pkg/apis/core/types";

service LightHandler {
    rpc Get (Light) returns (Light);
    rpc Create (Light) returns (Light);
    rpc Update (Light) returns (Light);
    rpc Delete (Light) returns (Light);

    rpc GetAll (GetAllRequest) returns (stream Light);
    rpc WatchAll (GetAllRequest) returns (stream Light);
    rpc SetDesired_state (SetStateRequest) returns (Light);
    rpc setDesire (SetStateRequest) returns (Light);
}

message SetStateRequest {
    string entityName = 1;
    LightState state = 2;
}

message GetAllRequest {
    // intentionally empty
}

message Light {
    string name = 1;
    types.Integration integration = 2;
    string Device = 3;
    string displayed_name = 4;
    string room = 5;
    LightState desired_state = 6;
    LightState state = 7;
    string mutation = 8;
}

message LightColorRGB {
    int32 red = 1;
    int32 green = 2;
    int32 blue = 3;
}

message LightState {
	int32 Brightness = 1;
	LightColorRGB colorRGB = 2;
	bool on = 3;
	int32 kelvin = 4;
	enum FlashMode {
        SHORT = 0;
        LONG = 1;
    };
    FlashMode flashMode = 5;
}